(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var r=t(2),a=t(16),c=t.n(a),u=t(4),o=t(0),s=function(e){var n=e.newSearch,t=e.handleChangeSearch;return Object(o.jsxs)("form",{children:["filter shown with",Object(o.jsx)("input",{value:n,onChange:t}),Object(o.jsx)("br",{})]})},i=function(e){var n=e.handleChange,t=e.value;return Object(o.jsx)("input",{onChange:n,value:t})},l=function(e){var n=e.handleSubmit,t=e.handleChangeName,r=e.handleChangeNumber,a=e.newName,c=e.newNumber;return Object(o.jsxs)("form",{onSubmit:n,children:[Object(o.jsxs)("div",{children:["name: ",Object(o.jsx)(i,{handleChange:t,value:a}),"number: ",Object(o.jsx)(i,{handleChange:r,value:c})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})},h=function(e){var n=e.handleDelete;return Object(o.jsx)("button",{onClick:n,children:"delete"})},d=function(e){var n=e.name,t=e.number,r=e.deletePerson;return Object(o.jsxs)("li",{className:"person",children:[n,t,Object(o.jsx)(h,{handleDelete:r})]})},b=function(e){var n=e.persons,t=e.newSearch,r=e.handleDeletePerson;return Object(o.jsx)("ul",{children:n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(o.jsx)(d,{name:e.name,number:e.number,deletePerson:r(e.name,e.id)},e.id)}))})},f=t(3),j=t.n(f),m=t(5),p=t(6),O=t.n(p),v="/api/persons",x={getAll:function(){var e=Object(m.a)(j.a.mark((function e(){var n,t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=O.a.get(v),e.next=3,n;case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(m.a)(j.a.mark((function e(n){var t,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.a.post(v,n),e.next=3,t;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),update:function(){var e=Object(m.a)(j.a.mark((function e(n,t){var r,a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={number:t},a=O.a.patch("".concat(v,"/").concat(n),r),e.next=4,a;case 4:return c=e.sent,e.abrupt("return",c.data);case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),deletePerson:function(){var e=Object(m.a)(j.a.mark((function e(n){var t,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.a.delete("".concat(v,"/").concat(n)),e.next=3,t;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},w=function(e){var n=e.message;return null===n?null:Object(o.jsx)("div",{className:"notification",children:n})},g=function(){var e=Object(r.useState)([]),n=Object(u.a)(e,2),t=n[0],a=n[1],c=Object(r.useState)(""),i=Object(u.a)(c,2),h=i[0],d=i[1],f=Object(r.useState)(""),j=Object(u.a)(f,2),m=j[0],p=j[1],O=Object(r.useState)(""),v=Object(u.a)(O,2),g=v[0],C=v[1],S=Object(r.useState)(null),N=Object(u.a)(S,2),k=N[0],y=N[1];Object(r.useEffect)((function(){x.getAll().then((function(e){a((function(n){return n.concat(e)}))}))}),[]);var D=function(){setTimeout((function(){y(null)}),3e3)};return Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{className:"title",children:"Phonebook"}),Object(o.jsx)(s,{newSearch:g,handleChangeSearch:function(e){C(e.target.value)}}),Object(o.jsx)(w,{message:k}),Object(o.jsx)("h2",{children:"Add a new person"}),Object(o.jsx)(l,{handleSubmit:function(e){e.preventDefault();var n={name:h,number:m};if(t.filter((function(e){return e.name===n.name})).length>0){if(window.confirm(h+" is already added to phonebook, replace the old number with a new one?")){var r=t.find((function(e){return e.name===h}));x.update(r.id,m).then((function(e){a(t.map((function(n){return n.name===h?e:n}))),y(h+" changed his number to "+m),D()})).catch((function(e){console.error(e)}))}}else x.create(n).then((function(e){a((function(n){return n.concat(e)})),y(h+" was succesfully added"),D(),d(""),p("")})).catch((function(e){console.error(e)}))},handleChangeName:function(e){d(e.target.value)},handleChangeNumber:function(e){p(e.target.value)},newName:h,newNumber:m}),Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)(b,{persons:t,newSearch:g,handleDeletePerson:function(e,n){return function(){window.confirm("Delete "+e+" ?")&&x.deletePerson(n).then((function(){a(t.filter((function(e){return e.id!==n}))),window.alert("Deleted: "+e),d(""),p("")})).catch((function(e){console.error(e)}))}}})]})};t(41);c.a.render(Object(o.jsx)(g,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.a205ccc3.chunk.js.map